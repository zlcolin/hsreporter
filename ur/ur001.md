### 需求分析
#### 功能需求
1. **问题提交页面**：
   - 提供问题类型选择（如“提交 Bug”、“我要吐槽”、“我有好想法”）。
   - 支持问题描述文本输入，包括问题描述、重现步骤、预期结果等模板。
   - 支持联系信息输入（如电子邮件）。
   - 支持截图和录屏文件上传（支持 jpg、png、gif、mkv、mp4 格式，最多 3 个文件）。
   - 提交按钮提交所有信息。

2. **与 Redmine 集成**：
   - 将用户提交的信息（文本、图片、视频）发送至 Redmine 系统。
   - 在 Redmine 中自动创建对应的问题单。
   - 返回问题单编号给用户。

3. **用户反馈**：
   - 提交成功后显示问题单编号。
   - 提交失败时显示错误信息。

### 系统设计

#### 1. 系统架构

```
hsreporter
├── 前端
│   ├── Vue.js 3
│   ├── Element Plus
│   └── 其他前端组件
├── 后端
│   ├── Node.js + Express
│   ├── Axios
│   ├── multer
│   └── 其他后端组件
├── 文件存储
│   ├── 本地服务器
│   └── 其他文件存储服务
└── Redmine 集成
    ├── Redmine REST API
    └── 其他 Redmine 集成组件

用户浏览器 → Vue.js 前端 → Node.js + Express 后端 → Redmine API
                    ↓
               文件存储（本地服务器）
```

#### 2. 技术栈
- **前端**
  - Vue.js 3
  - Element Plus（UI 组件库）
- **后端**
  - Node.js + Express
  - Axios（调用Redmine API）
  - multer（处理图片上传）
- **文件存储**：本地服务器
- **Redmine 集成**：Redmine REST API

#### 3. 数据流
1. 用户在Vue前端填写问题表单并上传文件。
2. 前端将数据（表单+文件）发送至Express后端。
3. 后端验证数据，存储文件至本地服务器。
4. 后端调用Redmine API创建问题单，将文件作为附件添加。
5. Redmine返回问题单编号，后端将其返回给前端。
6. 前端显示问题单编号给用户。

#### 4. 前端设计
- **问题类型选择**：提供三个选项卡（“提交 Bug”、“我要吐槽”、“我有好想法”），用户可以选择其中一种类型。默认选择“提交Bug”。必填项。
- **问题描述输入**：提供一个多行文本框，用户可以输入问题描述，包括问题描述、重现步骤、预期结果等。必填项。
- **截图和录屏文件上传**：支持 jpg、png、gif、mkv、mp4 格式，最多3个文件。
- **问题描述模板**：提供问题描述的模板，用户可以根据模板填写问题描述。
- **联系信息输入**：提供一个文本框，用户可以输入联系信息（如电子邮件），互生号和电话号码，互生号和电话号码要求11位数字。 为了排版需要，互生号和电话号放在同一行展示。
- **文件上传**：提供一个文件上传区域，支持拖拽或点击上传，限制文件类型和数量。
- **验证码**：提供一个4位数字验证码，只有验证码正确才能提交。
- **提交按钮**：用户点击提交按钮提交所有信息。

#### 5. 后端设计
- **接收请求**：验证请求参数（问题类型、描述是否为空），验证文件类型和大小。
- **处理文件**：将文件存储至本地服务器。
- **调用 Redmine API**：使用Redmine API创建问题单，并将文件作为附件上传。
- **返回结果**：返回Redmine问题单编号或错误信息。

#### 6. Redmine 集成
- **创建问题单**：使用 Redmine REST API 创建问题单，并将文件作为附件添加。
```
REDMINE_URL=http://xxx.yyy.com
REDMINE_API_KEY=ebb5a8b50073bcf4791bd65b5631141111111111
REDMINE_PROJECT_ID=feedback
```
